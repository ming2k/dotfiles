# =============================================================================
# TMux Copy Mode Configuration
# =============================================================================
# Switch between vi and emacs style by changing the line below:
set -g mode-keys emacs
# set -g mode-keys vi

# =============================================================================
# Emacs-style Copy Mode Bindings
# =============================================================================

# Exit copy mode
bind-key -T copy-mode Escape send-keys -X cancel

# Selection
bind -T copy-mode C-Space send-keys -X begin-selection
bind -T copy-mode C-w send-keys -X copy-selection-and-cancel \; display-message "Text copied!"
bind -T copy-mode M-w send-keys -X copy-selection-and-cancel \; display-message "Text copied!"
bind -T copy-mode C-g send-keys -X clear-selection

# Searching
bind -T copy-mode C-s command-prompt -i -p "(search down)" { send-keys -X search-forward-incremental "%%" }
bind -T copy-mode C-r command-prompt -i -p "(search up)" { send-keys -X search-backward-incremental "%%" }

# Mouse
bind -T copy-mode MouseDrag1Pane select-pane \; send-keys -X begin-selection
bind -T copy-mode MouseDragEnd1Pane send-keys -X copy-selection
bind -T copy-mode DoubleClick1Pane send-keys -X select-word
bind -T copy-mode TripleClick1Pane send-keys -X select-line
bind -T copy-mode MouseDown1Pane select-pane \; send-keys -X clear-selection

# =============================================================================
# Vi-style Copy Mode Bindings
# =============================================================================

# Exit copy mode
unbind -T copy-mode-vi q
bind-key -T copy-mode-vi Escape send-keys -X cancel

# Selection
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind -T copy-mode-vi y send-keys -X copy-selection-no-clear \; display-message "Text copied!"
bind -T copy-mode-vi C-S-c send-keys -X copy-selection-and-cancel \; display-message "Text copied!"
bind -T copy-mode-vi Y send-keys -X copy-line \; display-message "Line copied!"

# Searching
bind -T copy-mode-vi / send-keys -X search-forward
bind -T copy-mode-vi ? send-keys -X search-backward
bind -T copy-mode-vi n send-keys -X search-again
bind -T copy-mode-vi N send-keys -X search-reverse

# Mouse
bind -T copy-mode-vi MouseDrag1Pane select-pane \; send-keys -X begin-selection
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X
bind -T copy-mode-vi DoubleClick1Pane send-keys -X select-word
bind -T copy-mode-vi TripleClick1Pane send-keys -X select-line
bind -T copy-mode-vi MouseDown1Pane select-pane \; send-keys -X clear-selection

# =============================================================================
# Common Mouse Bindings
# =============================================================================
bind -n MouseDrag1Border resize-pane -M
bind -n DoubleClick1Pane select-pane \; copy-mode \; send-keys -X select-word
bind -n TripleClick1Pane select-pane \; copy-mode \; send-keys -X select-line
